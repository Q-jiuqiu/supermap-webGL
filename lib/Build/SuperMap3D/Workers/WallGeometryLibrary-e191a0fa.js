define(["exports","./arrayRemoveDuplicates-cf1d78b2","./Cartographic-cd471038","./when-f4cab1fd","./Math-d934ba6b","./PolylinePipeline-3ab35a94","./GeometryAttribute-aa019a62","./FeatureDetection-da767da4"],(function(e,t,r,a,i,o,n,s){"use strict";var h={};function l(e,t){return i.e.equalsEpsilon(e.latitude,t.latitude,i.e.EPSILON10)&&i.e.equalsEpsilon(e.longitude,t.longitude,i.e.EPSILON10)}var g=new r.a,p=new r.a;var c=new Array(2),u=new Array(2),m={positions:void 0,height:void 0,granularity:void 0,ellipsoid:void 0};function v(e,t){for(var a=new Array(e.length),i=0;i<e.length;i+=3){var o=new r.o(e[i],e[i+1],e[i+2]);s.p.multiplyByPoint(t,o,o),a[i]=o.x,a[i+1]=o.y,a[i+2]=o.z}return a}h.computePositions=function(e,h,A,y,d,w,f){var P=function(e,i,o,n){var s=(i=t.D(i,r.o.equalsEpsilon)).length;if(!(s<2)){var h=a.e(n),c=a.e(o),u=!0,m=new Array(s),v=new Array(s),A=new Array(s),y=i[0];m[0]=y;var d=e.cartesianToCartographic(y,g);c&&(d.height=o[0]),u=u&&0==d.height,v[0]=d.height,A[0]=h?n[0]:0;for(var w=1,f=1;f<s;++f){var P=i[f],b=e.cartesianToCartographic(P,p);c&&(b.height=o[f]),u=u&&0==b.height,l(d,b)?d.height<b.height&&(v[w-1]=b.height):(m[w]=P,v[w]=b.height,A[w]=h?n[f]:0,r.a.clone(b,d),++w)}if(!(u||w<2))return m.length=w,v.length=w,A.length=w,{positions:m,topHeights:v,bottomHeights:A}}}(e,h,A,y);if(a.e(P)){var b=n.m.eastNorthUpToFixedFrame(P.positions[0],e,new s.p),F=s.p.inverse(b,new s.p);h=P.positions,A=P.topHeights,y=P.bottomHeights;var C,D,E,x,H=h.length,q=H-2,L=i.e.chordLength(d,e.maximumRadius),N=m;if(N.minDistance=L,N.ellipsoid=e,w){var O,T=0;for(O=0;O<H-1;O++)T+=o.m.numberOfPoints(h[O],h[O+1],L)+1;C=new Float64Array(3*T),D=new Float64Array(3*T),a.e(f)&&(E=new Float64Array(3*T),x=new Float64Array(3*T));var I=c,R=u;N.positions=I,N.height=R;var S=0;for(O=0;O<H-1;O++){I[0]=h[O],I[1]=h[O+1],R[0]=A[O],R[1]=A[O+1];var z=o.m.generateArc(N);C.set(z,S),a.e(f)&&E.set(v(z,F),S),R[0]=y[O],R[1]=y[O+1],D.set(o.m.generateArc(N),S),a.e(f)&&x.set(v(o.m.generateArc(N),F),S),S+=z.length}}else N.positions=h,N.height=A,C=new Float64Array(o.m.generateArc(N)),a.e(f)&&(E=new Float64Array(v(o.m.generateArc(N)))),N.height=y,D=new Float64Array(o.m.generateArc(N)),a.e(f)&&(x=new Float64Array(v(o.m.generateArc(N))));var B={pos:{bottomPositions:D,topPositions:C,numCorners:q}};return a.e(f)&&(B.localPos={bottomPositions:x,topPositions:E,numCorners:q}),B}},e.D=h}));
