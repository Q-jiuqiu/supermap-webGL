define(["exports","./buildModuleUrl-26ebe74f","./Cartesian2-94d75d5d","./Cartographic-cd471038","./Cartesian4-d3cdbab5","./Check-5cf5e906","./when-f4cab1fd","./EllipsoidTangentPlane-367859c8","./Math-d934ba6b","./FeatureDetection-fb5abd84","./Plane-07f90ae1","./PolygonPipeline-846242d7"],(function(t,e,o,a,n,r,i,s,u,d,c,h){"use strict";var m=[];function l(t,e){this.center=a.o.clone(i.u(t,a.o.ZERO)),this.halfAxes=d.p$1.clone(i.u(e,d.p$1.ZERO)),this.areaDirty=1}m[0]={num:0,des:"inside"},m[1]={num:4,data:[0,4,7,3],des:"left"},m[2]={num:4,data:[1,2,6,5],des:"right"},m[3]={num:0},m[4]={num:4,data:[0,1,5,4],des:"bottom"},m[5]={num:6,data:[0,1,5,4,7,3],des:"bottom, left"},m[6]={num:6,data:[0,1,2,6,5,4],des:"bottom, right"},m[7]={num:0},m[8]={num:4,data:[2,3,7,6],des:"top"},m[9]={num:6,data:[4,7,6,2,3,0],des:"top, left"},m[10]={num:6,data:[2,3,7,6,5,1],des:"top, right"},m[11]={num:0},m[12]={num:0},m[13]={num:0},m[14]={num:0},m[15]={num:0},m[16]={num:4,data:[0,3,2,1],des:"front"},m[17]={num:6,data:[0,4,7,3,2,1],des:"front, left"},m[18]={num:6,data:[0,3,2,6,5,1],des:"front, right"},m[19]={num:0},m[20]={num:6,data:[0,3,2,1,5,4],des:"front, bottom"},m[21]={num:6,data:[2,1,5,4,7,3],des:"front, bottom, left"},m[22]={num:6,data:[0,3,2,6,5,4],des:"front, bottom, right"},m[23]={num:0},m[24]={num:6,data:[0,3,7,6,2,1],des:"front, top"},m[25]={num:6,data:[0,4,7,6,2,1],des:"front, top, left"},m[26]={num:6,data:[0,3,7,6,5,1],des:"front, top, right"},m[27]={num:0},m[28]={num:0},m[29]={num:0},m[30]={num:0},m[31]={num:0},m[32]={num:4,data:[4,5,6,7],des:"back"},m[33]={num:6,data:[4,5,6,7,3,0],des:"back, left"},m[34]={num:6,data:[1,2,6,7,4,5],des:"back, right"},m[35]={num:0},m[36]={num:6,data:[0,1,5,6,7,4],des:"back, bottom"},m[37]={num:6,data:[0,1,5,6,7,3],des:"back, bottom, left"},m[38]={num:6,data:[0,1,2,6,7,4],des:"back, bottom, right"},m[39]={num:0},m[40]={num:6,data:[2,3,7,4,5,6],des:"back, top"},m[41]={num:6,data:[0,4,5,6,2,3],des:"back, top, left"},m[42]={num:6,data:[1,2,3,7,4,5],des:"back, top, right"},l.packedLength=a.o.packedLength+d.p$1.packedLength,l.pack=function(t,e,o){return r.o.typeOf.object("value",t),r.o.defined("array",e),o=i.u(o,0),a.o.pack(t.center,e,o),d.p$1.pack(t.halfAxes,e,o+a.o.packedLength),e},l.unpack=function(t,e,o){return r.o.defined("array",t),e=i.u(e,0),i.e(o)||(o=new l),a.o.unpack(t,e,o.center),d.p$1.unpack(t,e+a.o.packedLength,o.halfAxes),o};var p=new a.o,w=new a.o,f=new a.o,b=new a.o,x=new a.o,y=new a.o,g=new d.p$1,M={unitary:new d.p$1,diagonal:new d.p$1},v=new a.o,O=new a.o,z=new a.o;l.fromPoints=function(t,e){if(i.e(e)||(e=new l),!i.e(t)||0===t.length)return e.halfAxes=d.p$1.ZERO,e.center=a.o.ZERO,e;var o,n=t.length,r=a.o.clone(t[0],p);for(o=1;o<n;o++)a.o.add(r,t[o],r);var s=1/n;a.o.multiplyByScalar(r,s,r);var u,c=0,h=0,m=0,v=0,O=0,z=0;for(o=0;o<n;o++)c+=(u=a.o.subtract(t[o],r,w)).x*u.x,h+=u.x*u.y,m+=u.x*u.z,v+=u.y*u.y,O+=u.y*u.z,z+=u.z*u.z;c*=s,h*=s,m*=s,v*=s,O*=s,z*=s;var $=g;$[0]=c,$[1]=h,$[2]=m,$[3]=h,$[4]=v,$[5]=O,$[6]=m,$[7]=O,$[8]=z;var P=d.p$1.computeEigenDecomposition($,M),A=d.p$1.clone(P.unitary,e.halfAxes),C=d.p$1.getColumn(A,0,b),N=d.p$1.getColumn(A,1,x),R=d.p$1.getColumn(A,2,y),T=-Number.MAX_VALUE,E=-Number.MAX_VALUE,I=-Number.MAX_VALUE,L=Number.MAX_VALUE,S=Number.MAX_VALUE,k=Number.MAX_VALUE;for(o=0;o<n;o++)u=t[o],T=Math.max(a.o.dot(C,u),T),E=Math.max(a.o.dot(N,u),E),I=Math.max(a.o.dot(R,u),I),L=Math.min(a.o.dot(C,u),L),S=Math.min(a.o.dot(N,u),S),k=Math.min(a.o.dot(R,u),k);C=a.o.multiplyByScalar(C,.5*(L+T),C),N=a.o.multiplyByScalar(N,.5*(S+E),N),R=a.o.multiplyByScalar(R,.5*(k+I),R);var U=a.o.add(C,N,e.center);a.o.add(U,R,U);var q=f;return q.x=T-L,q.y=E-S,q.z=I-k,a.o.multiplyByScalar(q,.5,q),d.p$1.multiplyByScale(e.halfAxes,q,e.halfAxes),e};var $=new a.o,P=new a.o;function A(t,e,o,n,s,u,c,h,m,p,w){if(!(i.e(s)&&i.e(u)&&i.e(c)&&i.e(h)&&i.e(m)&&i.e(p)))throw new r.t("all extents (minimum/maximum X/Y/Z) are required.");i.e(w)||(w=new l);var f=w.halfAxes;d.p$1.setColumn(f,0,e,f),d.p$1.setColumn(f,1,o,f),d.p$1.setColumn(f,2,n,f);var b=$;b.x=(s+u)/2,b.y=(c+h)/2,b.z=(m+p)/2;var x=P;x.x=(u-s)/2,x.y=(h-c)/2,x.z=(p-m)/2;var y=w.center;return b=d.p$1.multiplyByVector(f,b,b),a.o.add(t,b,y),d.p$1.multiplyByScale(f,x,f),w}var C=new a.a,N=new a.o,R=new a.a,T=new a.a,E=new a.a,I=new a.a,L=new a.a,S=new a.o,k=new a.o,U=new a.o,q=new a.o,B=new a.o,_=new o.o,D=new o.o,X=new o.o,V=new o.o,W=new o.o,j=new a.o,Z=new a.o,F=new a.o,G=new a.o,Y=new o.o,H=new a.o,J=new a.o,K=new a.o,Q=new c.o(a.o.UNIT_X,0);l.fromRectangle=function(t,e,n,d,h){if(!i.e(t))throw new r.t("rectangle is required");if(t.width<0||t.width>u.e.TWO_PI)throw new r.t("Rectangle width must be between 0 and 2*pi");if(t.height<0||t.height>u.e.PI)throw new r.t("Rectangle height must be between 0 and pi");if(i.e(d)&&!u.e.equalsEpsilon(d.radii.x,d.radii.y,u.e.EPSILON15))throw new r.t("Ellipsoid must be an ellipsoid of revolution (radii.x == radii.y)");var m,l,p,w,f,b,x;if(e=i.u(e,0),n=i.u(n,0),d=i.u(d,o.t.WGS84),t.width<=u.e.PI){var y=o.h.center(t,C),g=d.cartographicToCartesian(y,N),M=new s.f(g,d);x=M.plane;var v=y.longitude,O=t.south<0&&t.north>0?0:y.latitude,z=a.a.fromRadians(v,t.north,n,R),$=a.a.fromRadians(t.west,t.north,n,T),P=a.a.fromRadians(t.west,O,n,E),tt=a.a.fromRadians(t.west,t.south,n,I),et=a.a.fromRadians(v,t.south,n,L),ot=d.cartographicToCartesian(z,S),at=d.cartographicToCartesian($,k),nt=d.cartographicToCartesian(P,U),rt=d.cartographicToCartesian(tt,q),it=d.cartographicToCartesian(et,B),st=M.projectPointToNearestOnPlane(ot,_),ut=M.projectPointToNearestOnPlane(at,D),dt=M.projectPointToNearestOnPlane(nt,X),ct=M.projectPointToNearestOnPlane(rt,V),ht=M.projectPointToNearestOnPlane(it,W);return l=-(m=Math.min(ut.x,dt.x,ct.x)),w=Math.max(ut.y,st.y),p=Math.min(ct.y,ht.y),$.height=tt.height=e,at=d.cartographicToCartesian($,k),rt=d.cartographicToCartesian(tt,q),f=Math.min(c.o.getPointDistance(x,at),c.o.getPointDistance(x,rt)),b=n,A(M.origin,M.xAxis,M.yAxis,M.zAxis,m,l,p,w,f,b,h)}var mt=t.south>0,lt=t.north<0,pt=mt?t.south:lt?t.north:0,wt=o.h.center(t,C).longitude,ft=a.o.fromRadians(wt,pt,n,d,j);ft.z=0;var bt=Math.abs(ft.x)<u.e.EPSILON10&&Math.abs(ft.y)<u.e.EPSILON10?a.o.UNIT_X:a.o.normalize(ft,Z),xt=a.o.UNIT_Z,yt=a.o.cross(bt,xt,F);x=c.o.fromPointNormal(ft,bt,Q);var gt=a.o.fromRadians(wt+u.e.PI_OVER_TWO,pt,n,d,G);m=-(l=a.o.dot(c.o.projectPointOntoPlane(x,gt,Y),yt)),w=a.o.fromRadians(0,t.north,lt?e:n,d,H).z,p=a.o.fromRadians(0,t.south,mt?e:n,d,J).z;var Mt=a.o.fromRadians(t.east,pt,n,d,K);return A(ft,yt,xt,bt,m,l,p,w,f=c.o.getPointDistance(x,Mt),b=0,h)},l.clone=function(t,e){if(i.e(t))return i.e(e)?(a.o.clone(t.center,e.center),d.p$1.clone(t.halfAxes,e.halfAxes),e.areaDirty=1,e):new l(t.center,t.halfAxes)},l.intersectPlane=function(t,o){if(!i.e(t))throw new r.t("box is required.");if(!i.e(o))throw new r.t("plane is required.");var n=t.center,s=o.normal,u=t.halfAxes,c=s.x,h=s.y,m=s.z,l=Math.abs(c*u[d.p$1.COLUMN0ROW0]+h*u[d.p$1.COLUMN0ROW1]+m*u[d.p$1.COLUMN0ROW2])+Math.abs(c*u[d.p$1.COLUMN1ROW0]+h*u[d.p$1.COLUMN1ROW1]+m*u[d.p$1.COLUMN1ROW2])+Math.abs(c*u[d.p$1.COLUMN2ROW0]+h*u[d.p$1.COLUMN2ROW1]+m*u[d.p$1.COLUMN2ROW2]),p=a.o.dot(s,n)+o.distance;return p<=-l?e.S.OUTSIDE:p>=l?e.S.INSIDE:e.S.INTERSECTING};var tt=new a.o,et=new a.o,ot=new a.o,at=new a.o,nt=new a.o;l.distanceSquaredTo=function(t,e){if(!i.e(t))throw new r.t("box is required.");if(!i.e(e))throw new r.t("cartesian is required.");var o=a.o.subtract(e,t.center,$),n=t.halfAxes,s=d.p$1.getColumn(n,0,tt),u=d.p$1.getColumn(n,1,et),c=d.p$1.getColumn(n,2,ot),h=a.o.magnitude(s),m=a.o.magnitude(u),l=a.o.magnitude(c);a.o.normalize(s,s),a.o.normalize(u,u),a.o.normalize(c,c);var p=at;p.x=a.o.dot(o,s),p.y=a.o.dot(o,u),p.z=a.o.dot(o,c);var w,f=0;return p.x<-h?f+=(w=p.x+h)*w:p.x>h&&(f+=(w=p.x-h)*w),p.y<-m?f+=(w=p.y+m)*w:p.y>m&&(f+=(w=p.y-m)*w),p.z<-l?f+=(w=p.z+l)*w:p.z>l&&(f+=(w=p.z-l)*w),f};var rt=new a.o,it=new a.o;l.computePlaneDistances=function(t,o,n,s){if(!i.e(t))throw new r.t("box is required.");if(!i.e(o))throw new r.t("position is required.");if(!i.e(n))throw new r.t("direction is required.");i.e(s)||(s=new e.o);var u=Number.POSITIVE_INFINITY,c=Number.NEGATIVE_INFINITY,h=t.center,m=t.halfAxes,l=d.p$1.getColumn(m,0,tt),p=d.p$1.getColumn(m,1,et),w=d.p$1.getColumn(m,2,ot),f=a.o.add(l,p,rt);a.o.add(f,w,f),a.o.add(f,h,f);var b=a.o.subtract(f,o,it),x=a.o.dot(n,b);return u=Math.min(x,u),c=Math.max(x,c),a.o.add(h,l,f),a.o.add(f,p,f),a.o.subtract(f,w,f),a.o.subtract(f,o,b),x=a.o.dot(n,b),u=Math.min(x,u),c=Math.max(x,c),a.o.add(h,l,f),a.o.subtract(f,p,f),a.o.add(f,w,f),a.o.subtract(f,o,b),x=a.o.dot(n,b),u=Math.min(x,u),c=Math.max(x,c),a.o.add(h,l,f),a.o.subtract(f,p,f),a.o.subtract(f,w,f),a.o.subtract(f,o,b),x=a.o.dot(n,b),u=Math.min(x,u),c=Math.max(x,c),a.o.subtract(h,l,f),a.o.add(f,p,f),a.o.add(f,w,f),a.o.subtract(f,o,b),x=a.o.dot(n,b),u=Math.min(x,u),c=Math.max(x,c),a.o.subtract(h,l,f),a.o.add(f,p,f),a.o.subtract(f,w,f),a.o.subtract(f,o,b),x=a.o.dot(n,b),u=Math.min(x,u),c=Math.max(x,c),a.o.subtract(h,l,f),a.o.subtract(f,p,f),a.o.add(f,w,f),a.o.subtract(f,o,b),x=a.o.dot(n,b),u=Math.min(x,u),c=Math.max(x,c),a.o.subtract(h,l,f),a.o.subtract(f,p,f),a.o.subtract(f,w,f),a.o.subtract(f,o,b),x=a.o.dot(n,b),u=Math.min(x,u),c=Math.max(x,c),s.start=u,s.stop=c,s};var st=new e.i;l.isOccluded=function(t,o){if(!i.e(t))throw new r.t("box is required.");if(!i.e(o))throw new r.t("occluder is required.");var a=e.i.fromOrientedBoundingBox(t,st);return!o.isBoundingSphereVisible(a)},l.prototype.intersectPlane=function(t){return l.intersectPlane(this,t)},l.prototype.distanceSquaredTo=function(t){return l.distanceSquaredTo(this,t)},l.prototype.computePlaneDistances=function(t,e,o){return l.computePlaneDistances(this,t,e,o)},l.prototype.isOccluded=function(t){return l.isOccluded(this,t)},l.equals=function(t,e){return t===e||i.e(t)&&i.e(e)&&a.o.equals(t.center,e.center)&&d.p$1.equals(t.halfAxes,e.halfAxes)},l.prototype.clone=function(t){return l.clone(this,t)},l.prototype.equals=function(t){return l.equals(this,t)};var ut=new n.e;l.prototype._updateBBox=function(){if(1==this.areaDirty){var t=d.p$1.getColumn(this.halfAxes,0,tt),e=a.o.clone(a.o.negate(t,v)),o=d.p$1.getColumn(this.halfAxes,1,et),n=a.o.clone(a.o.negate(o,v)),r=d.p$1.getColumn(this.halfAxes,2,ot),i=a.o.clone(a.o.negate(r,v));this.bbox=[],a.o.add(this.center,o,v),a.o.add(v,i,O),a.o.add(O,e,z),this.bbox[0]=new a.o(z.x,z.y,z.z),a.o.add(O,t,z),this.bbox[1]=new a.o(z.x,z.y,z.z),a.o.add(v,r,O),a.o.add(O,t,z),this.bbox[2]=new a.o(z.x,z.y,z.z),a.o.add(O,e,z),this.bbox[3]=new a.o(z.x,z.y,z.z),a.o.add(this.center,n,v),a.o.add(v,i,O),a.o.add(O,e,z),this.bbox[4]=new a.o(z.x,z.y,z.z),a.o.add(O,t,z),this.bbox[5]=new a.o(z.x,z.y,z.z),a.o.add(v,r,O),a.o.add(O,t,z),this.bbox[6]=new a.o(z.x,z.y,z.z),a.o.add(O,e,z),this.bbox[7]=new a.o(z.x,z.y,z.z);var s=a.o.magnitude(t),u=a.o.magnitude(o),c=a.o.magnitude(r),h=new a.o(-s,-u,-c),m=new a.o(s,u,c);if(s*u*c==0)return void(this.areaDirty=-1);a.o.normalize(t,t),a.o.normalize(o,o),a.o.normalize(r,r),this.u=a.o.clone(t),this.v=a.o.clone(o),this.w=a.o.clone(r),this.posMin=h,this.posMaX=m,this.areaDirty=0}};var dt=[];dt.push(new o.o),dt.push(new o.o),dt.push(new o.o),dt.push(new o.o),dt.push(new o.o),dt.push(new o.o);var ct=new a.a,ht=new a.o;l.prototype.calculateBoxArea=function(t,e,o,r,s,c,l,p){this._updateBBox();var w=t,f=a.o.subtract(w,this.center,nt);if(-1==this.areaDirty){var b=s/r*(C=-1!=c?c:.5*a.o.distance(this.posMaX,this.posMin))/o;return u.e.PI*b*b}var x=a.o.fromElements(a.o.dot(f,this.u),a.o.dot(f,this.v),a.o.dot(f,this.w),rt),y=(x.x<this.posMin.x?1:0)+((x.x>this.posMaX.x?1:0)<<1)+((x.z<this.posMin.z?1:0)<<2)+((x.z>this.posMaX.z?1:0)<<3)+((x.y>this.posMaX.y?1:0)<<4)+((x.y<this.posMin.y?1:0)<<5);if(y>42)return console.log("area calculation is wrong"),-100;var g=m[y];if(0==g.num){b=s/r*(C=-1!=c?c:.5*a.o.distance(this.posMaX,this.posMin))/o;return u.e.PI*b*b}if(0==g.num)return console.log("area calculation is wrong"),-100;for(var M,v=[],O=l,z=0;z<g.num;z++){var $=dt[z],P=this.bbox[g.data[z]];M=!1;var A,C,N=u.e.PI;if(3===e)(A=d.p.multiplyByVector(O,n.e.fromElements(P.x,P.y,P.z,1),ut)).z<0&&(M=!0,-1==C&&(N=u.e.PI_OVER_FOUR,o=a.o.magnitude(f)));else{var R=p,T=R.ellipsoid.cartesianToCartographic(P,ct);i.e(T)?(R.project(T,ht),(A=d.p.multiplyByVector(O,n.e.fromElements(ht.z,ht.x,ht.y,1),ut)).z<0&&(M=!0)):M=!0}if(1==M)return N*(b=s/r*(C=-1!=c?c:.5*a.o.distance(this.posMaX,this.posMin))/o)*b;$.x=A.x/A.w,$.y=s-A.y/A.w,v.push($)}return Math.abs(h.A.computeArea2D(v))},t.y=l}));
