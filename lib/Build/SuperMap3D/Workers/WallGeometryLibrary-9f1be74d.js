define(["exports","./arrayRemoveDuplicates-cf1d78b2","./Cartographic-cd471038","./when-f4cab1fd","./Math-d934ba6b","./PolylinePipeline-d8cab236","./GeometryAttribute-49ca40d9","./FeatureDetection-b966c0a3"],(function(e,t,r,i,o,n,a,s){"use strict";var h={};function l(e,t){return o.e.equalsEpsilon(e.latitude,t.latitude,o.e.EPSILON10)&&o.e.equalsEpsilon(e.longitude,t.longitude,o.e.EPSILON10)}var g=new r.a,c=new r.a;var p=new Array(2),u=new Array(2),m={positions:void 0,height:void 0,granularity:void 0,ellipsoid:void 0};function v(e,t){for(var i=new Array(e.length),o=0;o<e.length;o+=3){var n=new r.o(e[o],e[o+1],e[o+2]);s.p.multiplyByPoint(t,n,n),i[o]=n.x,i[o+1]=n.y,i[o+2]=n.z}return i}h.computePositions=function(e,h,A,y,d,w,f){var b=function(e,o,n,a){var s=(o=t.D(o,r.o.equalsEpsilon)).length;if(!(s<2)){var h=i.e(a),p=i.e(n),u=!0,m=new Array(s),v=new Array(s),A=new Array(s),y=o[0];m[0]=y;var d=e.cartesianToCartographic(y,g);p&&(d.height=n[0]),u=u&&0==d.height,v[0]=d.height,A[0]=h?a[0]:0;for(var w=1,f=1;f<s;++f){var b=o[f],P=e.cartesianToCartographic(b,c);p&&(P.height=n[f]),u=u&&0==P.height,l(d,P)?d.height<P.height&&(v[w-1]=P.height):(m[w]=b,v[w]=P.height,A[w]=h?a[f]:0,r.a.clone(P,d),++w)}if(!(u||w<2))return m.length=w,v.length=w,A.length=w,{positions:m,topHeights:v,bottomHeights:A}}}(e,h,A,y);if(i.e(b)){var P=a.m.eastNorthUpToFixedFrame(b.positions[0],e,new s.p),F=s.p.inverse(P,new s.p);h=b.positions,A=b.topHeights,y=b.bottomHeights;var C,D,E,x,H=h.length,q=H-2,L=o.e.chordLength(d,e.maximumRadius),N=m;if(N.minDistance=L,N.ellipsoid=e,w){var O,T=0;for(O=0;O<H-1;O++)T+=n.m.numberOfPoints(h[O],h[O+1],L)+1;C=new Float64Array(3*T),D=new Float64Array(3*T),i.e(f)&&(E=new Float64Array(3*T),x=new Float64Array(3*T));var I=p,R=u;N.positions=I,N.height=R;var S=0;for(O=0;O<H-1;O++){I[0]=h[O],I[1]=h[O+1],R[0]=A[O],R[1]=A[O+1];var z=n.m.generateArc(N);C.set(z,S),i.e(f)&&E.set(v(z,F),S),R[0]=y[O],R[1]=y[O+1],D.set(n.m.generateArc(N),S),i.e(f)&&x.set(v(n.m.generateArc(N),F),S),S+=z.length}}else N.positions=h,N.height=A,C=new Float64Array(n.m.generateArc(N)),i.e(f)&&(E=new Float64Array(v(n.m.generateArc(N)))),N.height=y,D=new Float64Array(n.m.generateArc(N)),i.e(f)&&(x=new Float64Array(v(n.m.generateArc(N))));var B={pos:{bottomPositions:D,topPositions:C,numCorners:q}};return i.e(f)&&(B.localPos={bottomPositions:x,topPositions:E,numCorners:q}),B}},e.D=h}));
